<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>Exploration of Quotes</title>
    <link href="style.css" rel="stylesheet" type="text/css" />
    <script src="https://d3js.org/d3.v4.min.js"></script>
</head>

<body>
    <p id="title">Exploration of Quotes</p>
    <div id="tabs">
        <ul>
            <li><a href="home.html">Home</a></li>
            <li><a href="quotegenerator.html">Quote Generator</a></li> 
            <li><a href="twitter.html">Twitter Bot</a></li>
            <li><a class="active" href="vis.html">Visualizations</a></li>
            <li><a href="aboutus.html">About Us</a></li> 
        </ul>
    </div>
    <p class="a"> </p>

    <div id="DBESum">
        <p>The graphics below show the distribution of talks based on time.  Each histogram represents a different event. </p>
    </div>
    <div id="tR" class="totalText">
        <p>top right</p>
    </div>
    <div id="tL" class="total">
        <p>top left </p>
    </div>
    <div id="bR" class="totalText">
        <p>bottom right</p>
    </div>
    <div id="bL" class="total">
        <p>bottom left</p>
    </div>
    
    <div id="BottomDBESum">
        <p> big machine learning graph  </p>
    </div>
    <div id="BottomDBESum">
        <p> description </p>
    </div>


    <p id="footer"> <strong>Author:</strong> Allison Nowakowski, Amy Pitts, amd Kaitlyn Mulligan, <strong>Sources:</strong> The Web Minor, <em>Famous Quotes Database</em> </p>

    <script>
        //first clean up function that changes the languages and views into integers 
        function cleanup(data) {
            data.forEach(function(obj) {
                obj.duration = parseInt(obj.duration) / 60;

            });
            return data;
        }
        //clean up function that grabs the specific data from specified event 
        function grabTED(data, event) {
            var ted = [];
            var i = 0;
            data.forEach(function(obj) {
                if (obj.event == event) {
                    ted[i] = obj;
                    i++;
                }
            });
            return ted;
        }

        function countDuration(data) {
            var count = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
            var i = 0;
            data.forEach(function(obj) {
                if (obj.duration < 5) {
                    count[0] += 1;
                    i++;
                } else if (obj.duration < 10) {
                    count[1] += 1;
                    i++;
                } else if (obj.duration < 15) {
                    count[2] += 1;
                    i++;
                } else if (obj.duration < 20) {
                    count[3] += 1;
                    i++;
                } else if (obj.duration < 25) {
                    count[4] += 1;
                    i++;
                } else if (obj.duration < 30) {
                    count[5] += 1;
                    i++;
                } else if (obj.duration < 35) {
                    count[6] += 1;
                    i++;
                } else if (obj.duration < 40) {
                    count[7] += 1;
                    i++;
                } else if (obj.duration < 45) {
                    count[8] += 1;
                    i++;
                } else if (obj.duration < 50) {
                    count[8] += 1;
                    i++;
                }
            });
            return count;
        }

        d3.csv("ted_main.csv",
            function(error, raw_data) {
                var data = cleanup(raw_data);

                var data2012 = countDuration(grabTED(data, "TED2012"));
                var data2013 = countDuration(grabTED(data, "TED2013"));
                var data2014 = countDuration(grabTED(data, "TED2014"));
                var data2015 = countDuration(grabTED(data, "TED2015"));
                var data2016 = countDuration(grabTED(data, "TED2016"));
                var data2017 = countDuration(grabTED(data, "TED2017"));

                hist("tM", data2012, "TED2012");
                hist("tL", data2013, "TED2013");
                hist("bL", data2014, "TED2014");
                hist("tR", data2015, "TED2015");
                hist("bR", data2016, "TED2016");
                hist("bM", data2017, "TED2017");


            });


        function hist(id, data, title) {

            var w = 450;
            var h = 350;
            var barPadding = 3;
            var padding = 55;

            var dataset = data;
            var labels = ["0-4", "5-9", "10-14", "15-19", "25-29", "30-34", "35-39", "40-44", "45-49"];

            var xScale = d3.scaleLinear()
                .domain([0, d3.max(dataset, function(d) {
                    return d;
                })])
                .range([padding, w - padding]);

            var yScale = d3.scaleLinear()
                .domain([0, 35])
                .range([h - padding, padding]);

            //Define X axis
            var xAxis = d3.axisBottom()
                .scale(xScale)
                .ticks(5);

            var yAxis = d3.axisLeft()
                .scale(yScale)
                .ticks(8);


            var svg = d3.select("#" + id + "")
                .append("svg")
                .attr("width", w)
                .attr("height", h);

            svg.selectAll("rect")
                .data(dataset)
                .enter()
                .append("rect")
                .attr("x", function(d, i) {
                    return i * (w / dataset.length) + padding;
                })
                .attr("y", function(d) {
                    return yScale(d);
                })
                .attr("width", w / dataset.length - barPadding)
                .attr("height", function(d) {
                    return yScale(0) - yScale(d);
                })
                .attr("fill", function(d) {
                    return "red";
                });
            svg.selectAll("text")
                .data(labels)
                .enter()
                .append("text")
                .text(function(d) {
                    return d;
                })
                .attr("x", function(d, i) {
                    return i * (w / dataset.length) + padding + 5;
                })
                .attr("y", function(d) {
                    return h - 40;
                })
                .attr("font-family", "Helvetica")
                .attr("font-size", "12px")
                .attr("fill", "rgb(55, 55, 55)");

            //Title
            svg.append("text").text(" " + title + " ")
                .attr("y", 16)
                .attr("font-family", "Helvetica")
                .attr("font-size", "22px")
                .attr("fill", "red");
            //Create Y axis
            svg.append("g")
                .attr("class", "axis")
                .attr("transform", "translate(" + 50 + ",0)")
                .call(yAxis);
            //caption (y)		    	
            svg.append("text").text("Counts of Talks")
                .attr("y", 15)
                .attr("x", -225)
                .attr("dx", "0em")
                .attr("dy", "0em")
                .attr("transform", "rotate(-90)")
                .attr("font-family", "sans-serif")
                .attr("font-size", "18px")
                .attr("fill", "red");
            //caption (x)		
            svg.append("text").text("Duration (minutes)")
                .attr("y", 340)
                .attr("x", 180)
                .attr("font-family", "Helvetica")
                .attr("font-size", "18px")
                .attr("fill", "red");


        }

    </script>

</body>

</html>